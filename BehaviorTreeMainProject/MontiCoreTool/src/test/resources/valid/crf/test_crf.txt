
// parameter type definition

Parameter beam : Element {
    length: Double
}

Parameter plate : Element {
    thickness: Double,
    material: String
}

Parameter vacuumGripper : Tool {
    isOn: Boolean
}

Parameter nailGripper : Tool {
    isOn: Boolean
}

Parameter glueGun : Tool {
    isOn: Boolean
}

Parameter robot : Agent {
    type: String,
    speed: Double
}

Parameter stack : Layer {
    level: Integer,
    belongsToModule: Module
}

Parameter cassette : Module {
    layers: List<Layer>
}

Parameter positionOnRail : Location {
}

Parameter equipposition : Location {
}

Parameter firstposition : Location {
}

Parameter stackposition : Location {
}


// parameter instance

ParameterInstance: beam {b1}
ParameterInstance: beam {b3}
ParameterInstance: beam {b2}
ParameterInstance: robot {r1}
ParameterInstance: firstposition {fp1}
ParameterInstance: vacuumGripper {vg1}

// Predicate definition

predicate isAt {
    myObject - Element,
    location - Location
}

predicate atAgent {
    agent - Agent,
    location - Location
}

predicate hasTool {
    agent - Agent,
    tool - Tool
}

predicate holding {
    agent - Agent,
    myObject - Element
}

predicate atplace {
    myObject - Element,
    place - Location
}

predicate empty {
    client - Agent
}

predicate clear {
    myObject - Element
}

predicate ontop {
    myObject1 - Element,
    myObject2 - Element
}

predicate allset {
    lay - Layer,
    mod - Module
}

predicate belongstolayer {
    myObject - Element,
    lay - Layer
}

predicate belongstomodule {
    myObject - Element,
    mod - Module
}

predicate positionfree {
    pos - Location
}

predicate stacked {
    myObject - Element
}

//predicate instances

PredicateInstance: isAt(myObject = b1, location = fp1, isNegated = false)
PredicateInstance: hasTool(agent = r1, tool = vg1, isNegated = false)

// Action definition 

Action pickUp {
    parameters {
        pickedObject: beam
        rob: robot
        loc: firstposition
        robTool: vacuumGripper
    }
    preconditions {
        isAt(myObject = pickedObject, location = loc, isNegated = false)
        atAgent(agent = rob, location = loc, isNegated = false)
        hasTool(agent = rob, tool = robTool, isNegated = false)
    }    
    effects {
        holding(agent = rob, myObject = pickedObject, isNegated = false)
        atAgent(agent = rob, location = loc, isNegated = false)
    }   
    function {
        {pickedObject,rob},
        {Boolean}
    }
    implementation {
        pickupImplementation
    }
}




